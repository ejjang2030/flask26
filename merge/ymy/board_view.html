{% extends 'layout.html' %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-10">
        <h2 class="mb-4">ê²Œì‹œê¸€ ìƒì„¸ë³´ê¸°</h2>

        {# ğŸš¨ ê´€ë¦¬ì ì „ìš©: ì‹ ê³ ëœ ê¸€ì¼ ê²½ìš° ë³µêµ¬ ë°” ë…¸ì¶œ #}
        {% if session['user_role'] == 'admin' and board.report_count >= 1 %}
        <div class="alert alert-warning d-flex justify-content-between align-items-center shadow-sm mb-4" role="alert">
            <div>
                <i class="bi bi-exclamation-triangle-fill me-2"></i>
                <strong>ê´€ë¦¬ì ì•ˆë‚´:</strong> ì´ ê²Œì‹œë¬¼ì€ í˜„ì¬ <strong>{{ board.report_count }}ê±´</strong>ì˜ ì‹ ê³ ê°€ ì ‘ìˆ˜ë˜ì–´ ì¼ë°˜ ì‚¬ìš©ìì—ê²ŒëŠ” ìˆ¨ê²¨ì§„ ìƒíƒœì…ë‹ˆë‹¤.
            </div>
            <a href="/admin/clear_reports/{{ board.id }}" class="btn btn-success btn-sm"
               onclick="return confirm('ì‹ ê³  ê¸°ë¡ì„ ëª¨ë‘ ì‚­ì œí•˜ê³  ê²Œì‹œê¸€ì„ ì •ìƒ ë³µêµ¬í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')">
                âœ… ì‹ ê³  ì´ˆê¸°í™” ë° ë³µêµ¬
            </a>
        </div>
        {% endif %}

        <div class="card shadow-sm">
            <div class="card-header bg-dark text-white">
                <h4 class="mb-0">{{ board.title }}</h4>
            </div>

            <div class="card-body">
                <div class="row mb-3 border-bottom pb-2">
                    <div class="col-md-6">
                        <strong>ì‘ì„±ì:</strong> {{ board.writer_name }}
                        <span class="text-muted">({{ board.writer_uid }})</span>
                    </div>
                    <div class="col-md-6 text-md-end">
                        <strong>ì‘ì„±ì¼:</strong>
                        {{ board.created_at.strftime('%Y-%m-%d %H:%M') if board.created_at }}
                    </div>
                </div>

                <div class="view-content mb-5" style="min-height: 200px;">
                    {{ board.content }}
                </div>

                <div class="d-flex justify-content-center align-items-center gap-2 border-top pt-4">

                    {# ìˆ˜ì •/ì‚­ì œ: ì‘ì„±ì ë³¸ì¸ì—ê²Œë§Œ ë…¸ì¶œ #}
                    {% if session['user_id'] == board.member_id %}
                        <a href="/board/edit/{{ board.id }}" class="btn btn-warning">ìˆ˜ì •</a>
                        <a href="/board/delete/{{ board.id }}" class="btn btn-danger"
                           onclick="return confirm('ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')">ì‚­ì œ</a>
                    {% endif %}

                    {# ì‹ ê³  ê¸°ëŠ¥ #}
                    <div class="ms-3 border-start ps-3">
                        <form action="/board/report/{{ board.id }}" method="POST" class="d-inline-flex gap-1 align-items-center">
                            <select name="reason" class="form-select form-select-sm" style="width: auto;">
                                <option value="ìš•ì„¤/ë¹„í•˜">ìš•ì„¤/ë¹„í•˜</option>
                                <option value="ë¶€ì ì ˆí•œ ì½˜í…ì¸ ">ë¶€ì ì ˆí•œ ì½˜í…ì¸ </option>
                                <option value="ë„ë°°">ë„ë°°</option>
                            </select>
                            <button type="submit" class="btn btn-outline-danger btn-sm" onclick="return confirm('ì •ë§ ì‹ ê³ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')">
                                ğŸš¨ ì‹ ê³ 
                            </button>
                        </form>
                    </div>

                    {# ëª©ë¡ìœ¼ë¡œ ë²„íŠ¼ ì¶”ê°€ (ì„ íƒì‚¬í•­) #}
                    <a href="/board" class="btn btn-outline-secondary ms-2">ëª©ë¡ìœ¼ë¡œ</a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}